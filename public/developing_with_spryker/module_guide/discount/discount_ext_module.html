<!DOCTYPE html>
<html id="spryker-academy" lang="en-us" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Developing with Spryker|Module Guide|Discount">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0" />
        <meta name="author" content="Spryker Systems GmbH" />
        <meta name="title" content="Spryker Academy" />
        <meta name="msapplication-config" content="/resources/ui/images/favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="/resources/ui/images/favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="/resources/ui/images/favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="/resources/ui/images/favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="/resources/ui/images/favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="/resources/ui/images/favicons/favicon-16x16.png" />
        <!-- Google Tag Manager -->
        <script>/*<![CDATA[*/(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-NP24S2');/*]]>*/</script>
        <!-- End Google Tag Manager --><title>Extending the Discount Module</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <style>@import url('https://fonts.googleapis.com/css?family=Lato:300,400,400i,900');

</style>
        <link href="/resources/ui/css/academy-ui-typography.css" rel="stylesheet" />
        <link href="/resources/ui/css/academy-ui-app.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/navigate-previous.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/navigate-next.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.expand-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/expand.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.collapse-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/collapse.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../../resources/ui/css/academy-ui-typography.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body class="t-base t-base--page js-base-template">
        <!-- Google Tag Manager (noscript) -->
        <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NP24S2" height="0" width="0" style="display:none;visibility:hidden"></iframe>
        </noscript>
        <!-- End Google Tag Manager (noscript) -->
        <div class="t-base__header">
            <header class="o-header">
                <div class="o-header__content g-grid g-grid--container g-grid--middle"><a class="m-logo g-col g-col--sm-10 g-col--lg-2" href="/"><img class="m-logo__image" src="/resources/ui/images/logo.png" alt="Spryker Logo" /></a>
                    <nav class="m-nav-top g-col g-col--sm-2 g-col--lg-10" id="nav-top">
                        <div class="u-is-hidden--sm-xl">
                            <ul class="nocontent menu mc-component" data-mc-linked-toc="Data/Tocs/spryker_content.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                            </ul>
                        </div>
                        <div class="u-is-hidden--xl"><a class="m-nav-top__toggler js-base-template__toggler" href="#"><span class="icon icon-bars"></span></a>
                        </div>
                    </nav>
                </div>
            </header>
        </div>
        <div class="t-base__frame">
            <section class="o-search">
                <div class="g-grid g-grid--container">
                    <section class="m-search g-col g-col--sm-12">
                        <form action="/search.html" method="GET">
                            <input class="a-input a-input--expanded m-search__input" placeholder="Search in the Academy..." name="q" />
                            <button class="m-search__submit" type="submit"><span class="icon icon-search"></span>
                            </button>
                        </form>
                    </section>
                </div>
            </section>
            <section class="t-base__widgets g-grid g-grid--container g-grid--middle">
                <section class="m-breadcrumbs g-col g-col--sm-12 g-col--xl-8">
                    <div class="nocontent">
                        <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                        </div>
                    </div>
                </section>
                <div class="g-col g-col--sm-12 g-col--xl-4 u-align-right">
                    <section class="m-widget-toolbar">
                        <div class="buttons popup-container clearfix topicToolbarProxy _Skins_topic_toolbar mc-component nocontent">
                            <div class="button-group-container-left">
                                <button class="button needs-pie previous-topic-button" title="Navigate previous">
                                    <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="previous topic" />
                                </button>
                                <button class="button needs-pie next-topic-button" title="Navigate next">
                                    <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="next topic" />
                                </button>
                                <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                    <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="expand all" />
                                </button>
                                <button class="button needs-pie print-button" title="Print">
                                    <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="print" />
                                </button>
                            </div>
                        </div>
                    </section>
                    <div class="m-widget-github js-widget-github"><a class="m-widget-github__link icon icon-github js-widget-github__link" href="https://github.com/spryker/spryker-academy" target="_blank"></a>
                    </div>
                </div>
            </section>
            <main class="t-base__main g-grid g-grid--container">
                <div class="g-col g-col--sm-12 u-is-hidden--xl">
                    <div class="m-accordion js-accordion">
                        <div class="m-accordion__header">
                            <div class="m-accordion__title js-accordion__toggler"><span class="icon icon-ellipsis-v icon--left"></span>
                    Navigation
                </div>
                        </div>
                        <div class="m-accordion__content js-accordion__content">
                            <nav class="m-nav-sidebar" id="nav-sidebar">
                                <ul class="nocontent menu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/spryker_content.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
                <div class="t-page-sidebar__content o-content g-col g-col--sm-12 g-col--xl-8 js-anchorer js-highlighter js-widget-copy">
                    <h1>Extending the Discount <span class="GeneralBundle/Module">Module</span></h1>
                    <p>The main components that describe a discount are:</p>
                    <ul>
                        <li class="bullet_list" value="1"><strong>discount collector</strong>: Specifies for which items discount is being applied/calculated.<br />Example: The discount can be applied for a specific set of products or for orders that contain a minimum number of items or for orders that have a minimum grand total value.</li>
                        <li class="bullet_list" value="2"><strong>discount decision</strong> rule: Specifies the conditions that need to be satisfied for the discount to be applied.<br />Example: The discount can be used on specific days of the week or on specific time intervals in a day.</li>
                        <li class="bullet_list" value="3"><strong>discount filter</strong> is applied to disountable items after collector had been run, filters are executed after each discount allowed explicit filtering.</li>
                        <li class="bullet_list" value="4"><strong>discount collector strategy</strong>: It's possible to change what collector strategy is used when collecting items for discounts, by default query string strategy is used. Collecting items by defined rule.</li>
                        <li class="bullet_list" value="5"><strong>discount post save</strong>: This extension allows to add more behaviour to discounts after discount saved. </li>
                        <li class="bullet_list" value="6"><strong>discount post update</strong>: This extension allows to add more behaviour to discounts after discount updated. </li>
                        <li class="bullet_list" value="7"><strong>discount configuration expander</strong>: This extension allows to add more data to DiscountConfigurationTransfer object. This object later mapped to discount form. </li>
                        <li class="bullet_list" value="8"><strong>discount form expander</strong>: This extension allows to extend the discount form. </li>
                        <li class="bullet_list" value="9"><strong>discount form data provider expander</strong>: This extension allows adding additional data to discount form data provider. </li>
                        <li class="bullet_list" value="10"><strong>discount view block provider</strong>: This extension allows adding additional blocks to discount view page. </li>
                        <li class="bullet_list" value="11"><strong>discount applicable filter plugin</strong>: This extension allows to filter quote items before passing to query builder (decision rule). For example you can filter items you don't want to match all your rules. </li>
                    </ul>
                    <p>The decision rule associated with the discount always runs first; if it is satisfied, the collector is run so that the discount calculation can be performed on the collected items.</p>
                    <p>The <var>Discount</var> module already contains a set of discount collectors and decision rules, but depending on your needs, you can extend it with your own ones.</p>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Adding a New Decision Rule</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>The decision rules are placed in the <var>Business/DecisionRule/</var> folder from the <var>Discount</var> <span class="Generalbundle/module">module</span> in Zed.</p>
                            <p>A decision rule must implement the <var>DecisionRuleInterface</var>. You’ll need to implement the <var>isSatisfiedBy()</var> method that returns a boolean value that states if the decision rule is satisfied.</p>
                            <p>Example:</p><pre><code class="bash">&lt;?php
    /**
     * @param \Generated\Shared\Transfer\QuoteTransfer $quoteTransfer
     * @param \Generated\Shared\Transfer\ItemTransfer $currentItemTransfer
     * @param \Generated\Shared\Transfer\ClauseTransfer $clauseTransfer
     *
     * @throws \Spryker\Zed\Discount\Business\Exception\ComparatorException
     *
     * @return bool
     */
    public function isSatisfiedBy(
        QuoteTransfer $quoteTransfer,
        ItemTransfer $currentItemTransfer,
        ClauseTransfer $clauseTransfer
    ) {
        return $this-&gt;comparators-&gt;compare($clauseTransfer, $currentItemTransfer-&gt;getSku());
    }</code></pre>
                            <p>In the example above, we are checking if the given item is matching the clause (has the same SKU).</p>
                            <p>To use the query comparators, you need to inject them in the constructor of your new decision rule.</p>
                            <p>The next step is to expose the new decision rule through the facade: extend the <var>DiscountFacade</var> by adding a new operation that exposes its functionality.</p><pre><code class="bash">&lt;?php
    /**
     * @param \Generated\Shared\Transfer\QuoteTransfer $quoteTransfer
     * @param \Generated\Shared\Transfer\ItemTransfer $itemTransfer
     * @param \Generated\Shared\Transfer\ClauseTransfer $clauseTransfer
     *
     * @return bool
     */
    public function isItemSkuSatisfiedBy(
        QuoteTransfer $quoteTransfer,
        ItemTransfer $itemTransfer,
        ClauseTransfer $clauseTransfer
    ) {
        return $this-&gt;getFactory()
            -&gt;createSkuDecisionRule()
            -&gt;isSatisfiedBy($quoteTransfer, $itemTransfer, $clauseTransfer);
    }</code></pre>
                            <p>Create a plugin that calls the facade operation you have just added. The plugin must be placed inside the <var>Communication/Plugin/DecisionRule/</var> folder from the <var>Discount</var> module . The decision rule plugin must implement the <var>DecisionRulePluginInterface</var>.</p>
                            <p>Besides calling the discount decision rule to check if the discount can be applied, the plugin also defines the name of the field to which we’re performing the comparison, as well as the accepted data types.</p><pre><code class="bash">&lt;?php
class SkuDecisionRulePlugin extends AbstractPlugin implements DecisionRulePluginInterface
{

    /**
     * @param \Generated\Shared\Transfer\QuoteTransfer $quoteTransfer
     * @param \Generated\Shared\Transfer\ItemTransfer $itemTransfer
     * @param \Generated\Shared\Transfer\ClauseTransfer $clauseTransfer
     *
     * @return bool
     */
    public function isSatisfiedBy(QuoteTransfer $quoteTransfer, ItemTransfer $itemTransfer, ClauseTransfer $clauseTransfer)
    {
        return $this-&gt;getFacade()
            -&gt;isItemSkuSatisfiedBy($quoteTransfer, $itemTransfer, $clauseTransfer);
    }

    /**
     * Name of field as used in query string
     *
     * @return string
     */
    public function getFieldName()
    {
        return 'sku';
    }

    /**
     * @return array
     */
    public function acceptedDataTypes()
    {
        return [
            ComparatorOperators::TYPE_STRING,
            ComparatorOperators::TYPE_LIST,
        ];
    }

}</code></pre>
                            <p>The last step is to register the plugin so that it’s available in the discount plugin stack.</p>
                            <p>Extend the <var>DiscountDependencyProvider::getDecisionRulePlugins()</var> and add the new decision rule to the stack.</p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Adding a New Collector</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>Adding a new collector is similar to adding a new decision rule.</p>
                            <p>The discount collectors are placed inside the <var>Business/Collector/</var> folder from the <var>Discount</var> module in Zed.</p>
                            <p>A collector must implement the <var>CollectorInterface</var> and must extend the <var>BaseCollector</var> class that offers support for creating the discountable items. You’ll need to implement the <var>collect()</var> method that returns the set of items on which the discount can be applied.</p>
                            <p>Example:</p><pre><code class="bash">&lt;?php
    /**
     * @param \Generated\Shared\Transfer\QuoteTransfer $quoteTransfer
     * @param \Generated\Shared\Transfer\ClauseTransfer $clauseTransfer
     *
     * @return \Generated\Shared\Transfer\DiscountableItemTransfer[]
     */
    public function collect(QuoteTransfer $quoteTransfer, ClauseTransfer $clauseTransfer)
    {
        $discountableItems = [];
        foreach ($quoteTransfer-&gt;getItems() as $itemTransfer) {
            if ($this-&gt;comparators-&gt;compare($clauseTransfer, $itemTransfer-&gt;getSku()) === false) {
                continue;
            }

            $discountableItems[] = $this-&gt;createDiscountableItemTransfer(
                $itemTransfer-&gt;getUnitGrossPrice(),
                $itemTransfer-&gt;getQuantity(),
                $itemTransfer-&gt;getCalculatedDiscounts()
            );
        }

        return $discountableItems;
    }</code></pre>
                            <p>In the example above, we are looking over the items included in the order and select the ones that have the SKU specified in the collector clause.</p>
                            <p>To use the query comparators, you need to inject them in the constructor of your new discount collector.</p>
                            <p>The next step is to expose the new collector through the facade: extend the <var>DiscountFacade</var> by adding a new operation that exposes its functionality.</p><pre><code class="bash">&lt;?php
    /**
     * @param \Generated\Shared\Transfer\QuoteTransfer $quoteTransfer
     * @param \Generated\Shared\Transfer\ClauseTransfer $clauseTransfer
     *
     * @return array
     */
    public function collectBySku(QuoteTransfer $quoteTransfer, ClauseTransfer $clauseTransfer)
    {
        return $this-&gt;getFactory()
            -&gt;createSkuCollector()
            -&gt;collect($quoteTransfer, $clauseTransfer);
    }</code></pre>
                            <p>Create a plugin that calls the facade operation you have just added. The plugin must be placed inside the <var>Communication/Plugin/Collector/ </var>folder from the <var>Discount</var> module. The discount collector plugin must implement the <var>CollectorPluginInterface</var>.</p>
                            <p>Besides calling the discount collector to retrieve the items for which the discount can be applied, the plugin also defines the name of the field to which we’re performing the comparison, as well as the accepted data types.</p><pre><code class="bash">&lt;?php
class ItemBySkuCollectorPlugin extends AbstractPlugin implements CollectorPluginInterface
{

    /**
     * @param \Generated\Shared\Transfer\QuoteTransfer $quoteTransfer
     * @param \Generated\Shared\Transfer\ClauseTransfer $clauseTransfer
     *
     * @return array
     */
    public function collect(QuoteTransfer $quoteTransfer, ClauseTransfer $clauseTransfer)
    {
        return $this-&gt;getFacade()-&gt;collectBySku($quoteTransfer, $clauseTransfer);
    }

    /**
     * Name of field as used in query string
     *
     * @return string
     */
    public function getFieldName()
    {
        return 'sku';
    }

    /**
     * @return array
     */
    public function acceptedDataTypes()
    {
        return [
            ComparatorOperators::TYPE_STRING,
            ComparatorOperators::TYPE_LIST,
        ];
    }

}</code></pre>
                            <p>The last step is to register the plugin so that it’s available in the discount plugin stack.</p>
                            <p>Extend the <var>DiscountDependencyProvider::getCollectorPlugins()</var> and add the new discount collector to the stack.</p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Adding a Discount Filter Plugin</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>If you extended <var>\Spryker\Zed\Discount\Business\Calculator\Calculator</var> in your project code, change it to <var>\Spryker\Zed\Discount\Business\Calculator\FilteredCalculator</var>, as it also includes filtering related logic.</p>
                            <p>To add a new filter plugin, create a plugin in your respective module which implements <var>\Spryker\Zed\Discount\Dependency\Plugin\DiscountableItemFilterPluginInterface</var>.</p>
                            <p>The filter will send <var>\Generated\Shared\Transfer\CollectedDiscountTransfer</var> to your plugin for each applicable discount. To filter out discounts, remove items from <var>\Generated\Shared\Transfer\CollectedDiscountTransfer::$discountableItems</var>.</p>
                            <p>If you return an empty collection, then this discount will not be applied.</p>
                            <p>Add your plugin to the plugin stack <var>\Spryker\Zed\Discount\DiscountDependencyProvider::getDiscountableItemFilterPlugins</var> extended by a project. After this all discounts will be filtered by the provided plugins.</p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Creating a New Discount Collector Strategy Plugin</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>
                    Discount module distributes discount amount to discountable items. For this there is a collector which returns the list of items to which discount can be applied. If you want to have custom logic how this is collected, then you can implement a different collector strategy.
                </p>
                            <p>
                    You will need to implement <var>\Spryker\Zed\Discount\Dependency\Plugin\CollectorStrategyPluginInterface</var>. This interface has two methods, the first <var>\Spryker\Zed\Discount\Dependency\Plugin\CollectorStrategyPluginInterface::accept(DiscountTransfer $discountTransfer, QuoteTransfer $quoteTransfer)</var></p>
                            <p><![CDATA[
                   ]]>must return true for a given discount if current strategy is applicable. DiscountTransfer and QuoteTransfer are provided for additional context when making decision.
                </p>
                            <p>
                    The second, <var>\Spryker\Zed\Discount\Dependency\Plugin\CollectorStrategyPluginInterface::collect(DiscountTransfer $discountTransfer, QuoteTransfer $quoteTransfer)</var> must return DiscountableItemTransfer array, this is the items to which discount will be applied.
                </p>
                            <p>
                    You have to create a new plugin in your module and place it to for example <var>Communication/Plugins/Discount/NameOfPlugin.php</var>, add this plugin to Discount module dependency provider, by modifying <var>\Pyz\Zed\Discount\DiscountDependencyProvider::getCollectorStrategyPlugins()</var></p>
                            <p>
                   The method would look like:
                   <code>
                       /**
                         * @return \Spryker\Zed\Discount\Dependency\Plugin\CollectorStrategyPluginInterface[]
                         */
                        protected function getCollectorStrategyPlugins()
                        {
                            return [
                                new NameOfPlugin(),
                            ];
                        }
                   </code></p>
                            <p>
                    After this the new collector should be ready for use.
                </p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Adding a Discount Post Save Plugin</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>If you want to add more behavior after the discount is saved, you can implement <var>\Spryker\Zed\Discount\Dependency\Plugin\DiscountPostSavePluginInterface</var> plugin interface. </p>
                            <p>
                   Create a new plugin which implements the interface, place plugin in your module under <var>Communication/Plugins/Discount/NameOfPlugin()</var>.
                </p>
                            <p>
                   Add this plugin to <var>`\Pyz\Zed\Discount\DiscountDependencyProvider::getDiscountPostSavePlugins`</var> plugin stack.
                </p>
                            <p>
                   After this the new post save plugin should be ready for use.
                </p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Adding a Discount Post Update Plugin</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>If you want to add more behavior after discount is updated, you can implement <var>\Spryker\Zed\Discount\Dependency\Plugin\DiscountPostUpdatePluginInterface</var> plugin interface. </p>
                            <p>
                   Create a new plugin which implements the interface, place plugin in your module under <var>Communication/Plugins/Discount/NameOfPlugin()</var>.
                </p>
                            <p>
                   Add this plugin to <var>`\Pyz\Zed\Discount\DiscountDependencyProvider::getDiscountPostUpdatePlugins`</var> plugin stack.
                </p>
                            <p>
                   After this the new post save plugin should be ready for use.
                </p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Adding a Discount Configuration Expander Plugin</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>If you want to expand <var>DiscountConfigurationTransfer</var> with additional data, you can create a new plugin implementing <var>\Spryker\Zed\Discount\Dependency\Plugin\DiscountConfigurationExpanderPluginInterface</var> </p>
                            <p>
                   Create a new plugin which implements the interface, place plugin in your module under <var>Communication/Plugins/Discount/NameOfPlugin()</var>.
                </p>
                            <p>
                   Add this plugin to <var>`\Pyz\Zed\Discount\DiscountDependencyProvider::getDiscountConfigurationExpanderPlugins`</var> plugin stack.
                </p>
                            <p>
                   After this the new expander pluing should be ready for use.
                </p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Adding a Discount Form Expander Plugin</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>
                       It's possible to extend ZED discount administration form.
                   </p>
                            <p>
                       To inject new form fields, you have to implement <var>\Spryker\Zed\Discount\Dependency\Plugin\Form\DiscountFormExpanderPluginInterface</var> plugin interface.
                   </p>
                            <p>
                       This plugin has 1 method:
                       <ol><li value="1"><var>public function expandFormType(FormBuilderInterface $builder, array $options)</var> is the method used to add new properties to Discount form.</li></ol>

                      You have to use $builder object to extend Discount form.
                      reference you can check implementation of <var>\Spryker\Zed\DiscountPromotion\Communication\Plugin\Discount\DiscountPromotionCalculationFormExpanderPlugin</var> which adds two new form fields to Discount Calculation form.
                   </p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Adding a Discount Form Data Expander Plugin</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>
                       This plugin allows to add additional data to discount form data provider
                   </p>
                            <p>
                       To add additional data to discount form, <var>\Spryker\Zed\Discount\Dependency\Plugin\Form\DiscountFormDataProviderExpanderPluginInterface</var> plugin interface should be implemented.
                   </p>
                            <p>
                       This plugin has 2 methods:

                       <ol><li value="1"><var>public function expandDataProviderOptions(array $options);</var>: This method must return extended option array which will be passed to DiscountForm.</li><li value="2"><var>public function expandDataProviderData(array $data);</var>: This method must return extended data array which will be passed to DiscountForm.</li></ol>

                      Add this plugin to: <var>\Pyz\Zed\Discount\DiscountDependencyProvider::getDiscountFormDataProviderExpanderPlugins</var></p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Rendering Additional Data Inside Discount View Page</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>
                       You can provide URL to your action which will include rendered html at the bottom of the discount view page.
                   </p>
                            <p>
                      It is necessary to implement  <var>\Spryker\Zed\Discount\Dependency\Plugin\DiscountViewBlockProviderPluginInterface</var> plugin interface.
                   </p>
                            <p>
                      This plugin has single method <var> public function getUrl()</var> which must return URL path to controller action, for example <var>"/discount/block/index"</var>.
                      Add this plugin to: <var>\Pyz\Zed\Discount\DiscountDependencyProvider::getDiscountViewTemplateProviderPlugins</var></p>
                        </div>
                    </div>
                    <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Filter Applicable Discounts Before Query Rule Engine</a></span>
                        <div class="MCDropDownBody dropDownBody">
                            <p>
                       You can filter out  quote items before making them match your decision rule. For example, you don't want matching promotion items.
                       This filter will be applicable to all decision rules. Each plugin is narrowing down applicable items. For example when you have two plugins, second plugin will receive items filtered by the first one.
                   </p>
                            <p>
                      It is necessary to implement  <var>\Spryker\Zed\Discount\Dependency\Plugin\DiscountApplicableFilterPluginInterface</var> plugin interface.
                   </p>
                            <p>
                      This plugin has single method <var> public function filter(array $discountApplicableItems, QuoteTransfer $quoteTransfer, $idDiscount);</var> which must return array of <var>ItemTransfer[]</var> object applicable for discount.
                      Add this plugin to: <var>\Pyz\Zed\Discount\DiscountDependencyProvider::getDiscountApplicableFilterPlugins</var></p>
                        </div>
                    </div>
                    <p>&#160;</p>
                    <p><![CDATA[
		]]><i>Last review date: Sep. 1, 2017</i> <![CDATA[
    ]]></p>
                </div>
                <div class="t-page-sidebar__sidebar g-col g-col--sm-12 g-col--xl-4 u-is-hidden--sm-xl">
                    <section class="a-box a-box--shadow">
                        <nav class="m-nav-sidebar" id="nav-sidebar">
                            <ul class="nocontent menu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/spryker_content.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                            </ul>
                        </nav>
                    </section>
                </div>
            </main>
            <div class="t-base__footer">
                <footer class="o-footer g-grid g-grid--middle">
                    <nav class="g-grid g-grid--container g-grid--center"><a class="o-footer__link" href="https://spryker.com/privacy-policy" target="_blank">Privacy policy</a><a class="o-footer__link" href="https://spryker.com/partneragb" target="_blank">AGB Partnerprogram</a><a class="o-footer__link" href="https://spryker.com/impressum" target="_blank">Impressum</a>
                    </nav>
                </footer>
            </div><a class="a-scroll-top js-scroll-top" href="#"><span class="a-scroll-top__icon icon icon-chevron-up"></span></a>
            <div class="t-base__overlay js-base-template__toggler">
            </div>
        </div>
        <div class="t-base__off">
            <section class="o-off-canvas">
                <nav class="m-nav-mobile" id="nav-mobile">
                    <ul class="nocontent menu mc-component" data-mc-linked-toc="Data/Tocs/spryker_content.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                    </ul>
                </nav>
            </section>
        </div>
        <script src="/resources/ui/js/academy-ui-manifest.js">
        </script>
        <script src="/resources/ui/js/academy-ui-vendor.js">
        </script>
        <script src="/resources/ui/js/academy-ui-app.js">
        </script>
    </body>
</html>